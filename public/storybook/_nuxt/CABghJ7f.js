import{d as j,i as f,j as D,h as I,S as k,o as n,H as b,W as S,E as z,L as d,c as x,u as v,U as u,X as N,az as T,aA as M,F as p,n as W,w as m,Q as L,R as P}from"./EtfM6F04.js";import{k as w,x as U,j as R,ad as A,$ as B,i as H}from"./B3FH9UnZ.js";import{a as K}from"./BLnBc-s6.js";import{h as Q,V as X}from"./DIjUcg-h.js";const q=["onClick"],G=["placeholder"],$=j({__name:"EnvironmentColors",props:{activeColor:{},selector:{type:Boolean,default:!1}},emits:["select"],setup(g,{emit:y}){const o=g,C=y,s=f(""),i=f(null),c=f(!1),r=f(!1),t=[{color:"#FFFFFF"},{color:"#EF0006"},{color:"#EDBE20"},{color:"#069061"},{color:"#FB892C"},{color:"#0082D0"},{color:"#5203D1"},{color:"#FFC0CB"}],h=D(()=>o.activeColor&&!t.some(e=>e.color===o.activeColor)||s.value?`background-color: ${o.activeColor||s.value};`:"background: linear-gradient(to right, rgb(235, 87, 87), rgb(242, 201, 76), rgb(76, 183, 130), rgb(78, 167, 252), rgb(250, 96, 122));"),F=()=>{c.value=!c.value,o.selector&&(r.value=!1),W(()=>{i.value&&i.value.focus()})};I(s,e=>{e&&!e.startsWith("#")&&(s.value=`#${e}`),c.value=!0});const E=()=>{o.selector&&(r.value=!r.value)},_=e=>{C("select",e),o.selector&&(r.value=!1)};return(e,l)=>(n(),k("div",null,[c.value?b("",!0):(n(),k(S,{key:0},[o.selector&&!r.value?(n(),k("div",{key:0,class:d(["flex cursor-pointer items-center justify-center rounded-full",o.selector?"h-4 w-4":"h-5 w-5"]),style:z({backgroundColor:e.activeColor}),onClick:E},[e.activeColor?(n(),x(v(w),{key:0,class:d(["text-c-btn",o.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"])):b("",!0)],6)):b("",!0),r.value||!o.selector?(n(),k("div",{key:1,class:d(["color-selector flex flex-row items-center justify-between gap-1.5 space-x-1",o.selector?"h-4":"min-h-10 min-w-[296px]"])},[(n(),k(S,null,N(t,a=>u("div",{key:a.color,class:d(["flex cursor-pointer items-center justify-center rounded-full",o.selector?"h-4 w-4":"h-5 w-5"]),style:z({backgroundColor:a.color}),onClick:V=>_(a.color)},[e.activeColor===a.color&&!s.value?(n(),x(v(w),{key:0,class:d(["text-c-btn",o.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"])):b("",!0)],14,q)),64)),l[2]||(l[2]=u("hr",{class:"border-ghost h-5 w-0.5 border-l"},null,-1)),u("label",{class:d(["z-10 flex cursor-pointer flex-row items-center justify-center gap-2 rounded-full",o.selector?"h-4 w-4":"h-5 w-5"]),style:z(h.value),onClick:F},[!c.value&&(e.activeColor===s.value||e.activeColor&&!t.some(a=>a.color===e.activeColor))?(n(),x(v(w),{key:0,class:"text-c-btn",icon:"Checkmark",size:"xs"})):b("",!0)],6)],2)):b("",!0)],64)),c.value?(n(),k("div",{key:1,class:d(["color-selector flex flex-1 items-center gap-2 rounded",o.selector?"h-4":"min-h-10"])},[u("span",{class:d(["absolute rounded-full border border-dashed",o.selector?"h-4 w-4":"h-5 w-5"])},null,2),u("span",{class:d(["z-[1] rounded-full",o.selector?"h-4 w-4":"h-5 w-5"]),style:z(h.value)},null,6),T(u("input",{ref_key:"customColorInputRef",ref:i,"onUpdate:modelValue":l[0]||(l[0]=a=>s.value=a),class:"w-full flex-1 border-transparent text-sm outline-none",placeholder:e.activeColor||"#000000",type:"text",onInput:l[1]||(l[1]=a=>_(s.value))},null,40,G),[[M,s.value]]),u("button",{class:"text-c-3 hover:bg-b-2 rounded-lg p-1.5",type:"button",onClick:F},[p(v(w),{icon:"Checkmark",size:"xs"})])],2)):b("",!0)]))}}),J={class:"flex flex-col gap-4"},oe=j({__name:"EnvironmentColorModal",props:{state:{},selectedColor:{}},emits:["cancel","submit"],setup(g,{emit:y}){const o=g,C=y,s=f(""),i=r=>{s.value=r},c=()=>{C("submit",s.value),s.value=""};return(r,t)=>(n(),x(v(U),{size:"xxs",state:r.state,title:"Edit Environment Color"},{default:m(()=>[u("div",J,[p($,{activeColor:s.value||o.selectedColor,class:"w-full p-1",onSelect:i},null,8,["activeColor"]),p(K,{onCancel:t[0]||(t[0]=h=>C("cancel")),onSubmit:c})])]),_:1},8,["state"]))}}),O={class:"flex items-start gap-2"},te=j({__name:"EnvironmentModal",props:{state:{},activeWorkspaceCollections:{},collectionId:{}},emits:["cancel","submit"],setup(g,{emit:y}){const o=g,C=y,{events:s}=R(),i=f(""),c=f("#FFFFFF"),r=D(()=>[...o.activeWorkspaceCollections.filter(e=>{var l;return((l=e.info)==null?void 0:l.title)!=="Drafts"}).map(e=>{var l;return{id:e.uid,label:((l=e.info)==null?void 0:l.title)??"Untitled Collection"}})]),t=f(r.value.find(e=>e.id===o.collectionId)),{toast:h}=H(),F=e=>{c.value=e};I(()=>o.state.open,e=>{e&&(i.value="",c.value="#FFFFFF",o.collectionId?t.value=r.value.find(l=>l.id===o.collectionId):t.value=void 0)});const E=()=>{var e,l,a,V;if(!i.value.trim()){h("Please enter a name before adding an environment.","error");return}if(!((e=t.value)!=null&&e.id)){h("Please select a collection before adding an environment.","error");return}C("submit",{name:i.value,color:c.value,type:((l=t.value)==null?void 0:l.id)==="global"?"global":"collection",collectionId:((a=t.value)==null?void 0:a.id)!=="global"?(V=t.value)==null?void 0:V.id:void 0})},_=()=>{o.state.hide(),s.commandPalette.emit({commandName:"Create Collection"})};return(e,l)=>(n(),x(v(U),{bodyClass:"border-t-0 rounded-t-lg",size:"xs",state:e.state},{default:m(()=>[p(Q,{disabled:!t.value||!i.value.trim(),onCancel:l[2]||(l[2]=a=>C("cancel")),onSubmit:E},{options:m(()=>[p(v(A),{modelValue:t.value,"onUpdate:modelValue":l[1]||(l[1]=a=>t.value=a),options:r.value,placeholder:"Select Type"},{default:m(()=>[r.value.length>0?(n(),x(v(B),{key:0,class:"hover:bg-b-2 max-h-8 w-fit justify-between gap-1 p-2 text-xs",variant:"outlined"},{default:m(()=>[u("span",{class:d(t.value?"text-c-1":"text-c-3")},P(t.value?t.value.label:"Select Collection"),3),p(v(w),{class:"text-c-3",icon:"ChevronDown",size:"xs"})]),_:1})):(n(),x(v(B),{key:1,class:"hover:bg-b-2 max-h-8 justify-between gap-1 p-2 text-xs",variant:"outlined",onClick:_},{default:m(()=>l[3]||(l[3]=[u("span",{class:"text-c-1"},"Create Collection",-1)])),_:1,__:[3]}))]),_:1},8,["modelValue","options"])]),submit:m(()=>l[4]||(l[4]=[L(" Add Environment ")])),default:m(()=>[u("div",O,[p($,{activeColor:c.value,class:"peer",selector:"",onSelect:F},null,8,["activeColor"]),p(X,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=a=>i.value=a),class:"-mt-[.5px] !p-0 peer-has-[.color-selector]:hidden",placeholder:"Environment name"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}});export{te as K,oe as M};
